[1mdiff --git a/SaleManagerApp/SaleManagerApp/App.xaml b/SaleManagerApp/SaleManagerApp/App.xaml[m
[1mindex adba84d..69434a7 100644[m
[1m--- a/SaleManagerApp/SaleManagerApp/App.xaml[m
[1m+++ b/SaleManagerApp/SaleManagerApp/App.xaml[m
[36m@@ -33,6 +33,5 @@[m
         <DataTemplate DataType="{x:Type vm:SideBarViewModel}">[m
             <v:SideBar />[m
         </DataTemplate>[m
[31m-[m
     </Application.Resources>[m
 </Application>[m
[1mdiff --git a/SaleManagerApp/SaleManagerApp/DataBaseScript/SaleManagement1.sql b/SaleManagerApp/SaleManagerApp/DataBaseScript/SaleManagement1.sql[m
[1mindex 1932cb7..f439393 100644[m
[1m--- a/SaleManagerApp/SaleManagerApp/DataBaseScript/SaleManagement1.sql[m
[1m+++ b/SaleManagerApp/SaleManagerApp/DataBaseScript/SaleManagement1.sql[m
[36m@@ -5,7 +5,7 @@[m [mUSE SaleManagement2025[m
 CREATE TABLE [User][m
 ([m
 	userId char(7) primary key,[m
[31m-	fullName nvarchar(30) not nu	ll,[m
[32m+[m	[32mfullName nvarchar(30) not null,[m
 	userName varchar(20) not null unique,[m
 	hashedPassword varchar(100) not null,[m
 	avatarUrl varchar(100),[m
[36m@@ -37,16 +37,6 @@[m [mCREATE TABLE Permission[m
 	updatedAt datetime[m
 )[m
 [m
[31m-CREATE TABLE ImportMoneyPerMonth[m
[31m-([m
[31m-	importMoneyPerMonthId char(7) primary key not null,[m
[31m-	[month] int not null,[m
[31m-	[year] int not null,[m
[31m-	totalAmount money,[m
[31m-	createdAt datetime default getdate(),[m
[31m-	updatedAt datetime[m
[31m-)[m
[31m-[m
 CREATE TABLE TotalDrink [m
 ([m
 	totalDrinkId char(7) primary key,[m
[36m@@ -305,11 +295,11 @@[m [mCREATE TABLE ImportOrderDetail[m
 ([m
   importOrderId char(7) not null,[m
   ingredientId char(7) not null,[m
[31m-  unitPrice money not null,[m
   quantity int not null,[m
[32m+[m[32m  supplierId char(7) not null,[m
   createdAt datetime default getdate(),[m
   updatedAt datetime,[m
[31m-  primary key(importOrderId, ingredientId)[m
[32m+[m[32m  primary key(importOrderId, ingredientId, supplierId)[m
 )[m
 [m
 CREATE TABLE ExportOrder[m
[36m@@ -369,9 +359,6 @@[m [mALTER TABLE Revenue ADD CHECK([year] > 0)[m
 ALTER TABLE Revenue ADD CHECK(totalAmount >= 0)[m
 ALTER TABLE MenuItem ADD CHECK(unitPrice >= 0)[m
 ALTER TABLE MenuItem ADD CHECK([description] IN ('Äá»“ Äƒn', 'NÆ°á»›c uá»‘ng'))[m
[31m-ALTER TABLE ImportMoneyPerMonth ADD CHECK(totalAmount >= 0)[m
[31m-ALTER TABLE ImportMoneyPerMonth ADD CHECK([month] between 1 and 12)[m
[31m-ALTER TABLE ImportMoneyPerMonth ADD CHECK([year] > 0)[m
 ALTER TABLE MenuItemDetail ADD CHECK(quantity >= 0)[m
 ALTER TABLE Attendance ADD CHECK(totalHours >= 0) [m
 ALTER TABLE PayRoll ADD CHECK([month] between 1 and 12)[m
[36m@@ -386,7 +373,6 @@[m [mALTER TABLE Ingredient ADD CHECK(quantity >= 0)[m
 ALTER TABLE Ingredient ADD CHECK(minQuantity >= 0)[m
 ALTER TABLE IngredientSupplier ADD CHECK(unitPrice > 0)[m
 ALTER TABLE ImportOrder ADD CHECK(totalAmount >= 0)[m
[31m-ALTER TABLE ImportOrderDetail ADD CHECK(unitPrice >= 0)[m
 ALTER TABLE ImportOrderDetail ADD CHECK(quantity >= 0)[m
 ALTER TABLE ExportOrderDetail ADD CHECK(quantity >= 0)[m
 ALTER TABLE Feedback ADD CHECK(rating between 1 and 5)[m
[36m@@ -501,7 +487,6 @@[m [mALTER TABLE IngredientSupplier[m
 ADD CONSTRAINT FK_IngredientSupplier_Ingredient[m
 FOREIGN KEY (ingredientId) REFERENCES Ingredient(ingredientId);[m
 [m
[31m-[m
 -- IngredientSupplier â†’ Supplier[m
 ALTER TABLE IngredientSupplier[m
 ADD CONSTRAINT FK_IngredientSupplier_Supplier[m
[36m@@ -512,11 +497,6 @@[m [mALTER TABLE ImportOrder[m
 ADD CONSTRAINT FK_ImportOrder_Employee[m
 FOREIGN KEY (employeeId) REFERENCES Employee(employeeId);[m
 [m
[31m--- ImportOrder â†’ Supplier[m
[31m-ALTER TABLE ImportOrder[m
[31m-ADD CONSTRAINT FK_ImportOrder_Supplier[m
[31m-FOREIGN KEY (supplierId) REFERENCES Supplier(supplierId);[m
[31m-[m
 -- ImportOrderDetail â†’ ImportOrder[m
 ALTER TABLE ImportOrderDetail[m
 ADD CONSTRAINT FK_ImportOrderDetail_ImportOrder[m
[36m@@ -527,9 +507,10 @@[m [mALTER TABLE ImportOrderDetail[m
 ADD CONSTRAINT FK_ImportOrderDetail_Ingredient[m
 FOREIGN KEY (ingredientId) REFERENCES Ingredient(ingredientId);[m
 [m
[31m-[m
[32m+[m[32m-- ImportOrderDetail â†’ Supplier[m
 ALTER TABLE ImportOrderDetail[m
[31m-DROP CONSTRAINT FK_ImportOrderDetail_Supplier[m
[32m+[m[32mADD CONSTRAINT FK_ImportOrderDetail_Supplier[m
[32m+[m[32mFOREIGN KEY (supplierId) REFERENCES Supplier(supplierId);[m
 [m
 -- ExportOrder â†’ Employee[m
 ALTER TABLE ExportOrder[m
[36m@@ -580,566 +561,4 @@[m [mUPDATE [User][m
 SET hashedPassword = 'JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='[m
 WHERE userId = 'AD00001'[m
 [m
[31m-ALTER TABLE ImportOrder[m
[31m-ADD supplierId char(7)[m
[31m-[m
[31m---Generate Id automatically[m
[31m-CREATE PROCEDURE sp_GenerateId[m
[31m-    @prefix     CHAR(2),        -- 2 kÃ½ tá»± Ä‘áº§u ID[m
[31m-    @tableName  SYSNAME,        -- tÃªn báº£ng cáº§n táº¡o ID[m
[31m-    @idColumn   SYSNAME,        -- tÃªn cá»™t ID trong báº£ng[m
[31m-    @idLength   INT,            -- tá»•ng chiá»u dÃ i ID (7)[m
[31m-    @newId      VARCHAR(20) OUTPUT[m
[31m-AS[m
[31m-BEGIN[m
[31m-    DECLARE @sql NVARCHAR(MAX);[m
[31m-    DECLARE @maxId VARCHAR(20);[m
[31m-    DECLARE @numberPart INT;[m
[31m-    DECLARE @numberLength INT = @idLength - LEN(@prefix);  -- = 5[m
[31m-[m
[31m-    -- Láº¥y MAX(ID) trong báº£ng theo prefix[m
[31m-    SET @sql = N'[m
[31m-        SELECT @maxId_OUT = MAX(' + QUOTENAME(@idColumn) + N')[m
[31m-        FROM ' + QUOTENAME(@tableName) + N'[m
[31m-        WHERE ' + QUOTENAME(@idColumn) + N' LIKE ''' + @prefix + '%'';';[m
[31m-[m
[31m-    EXEC sp_executesql[m
[31m-        @sql,[m
[31m-        N'@maxId_OUT VARCHAR(20) OUTPUT',[m
[31m-        @maxId_OUT = @maxId OUTPUT;[m
[31m-    -- Náº¿u chÆ°a cÃ³ ID -> sinh cÃ¡i Ä‘áº§u tiÃªn[m
[31m-    IF @maxId IS NULL[m
[31m-    BEGIN[m
[31m-        SET @numberPart = 1;[m
[31m-    END[m
[31m-    ELSE[m
[31m-    BEGIN[m
[31m-        SET @numberPart = CAST(SUBSTRING(@maxId, LEN(@prefix)+1, @numberLength) AS INT) + 1;[m
[31m-    END[m
[31m-    -- Táº¡o ID cuá»‘i cÃ¹ng: prefix + sá»‘ dáº¡ng 00001[m
[31m-    SET @newId = @prefix + RIGHT(REPLICATE('0', @numberLength) + CAST(@numberPart AS VARCHAR), @numberLength);[m
[31m-END;[m
[31m-GO[m
[31m-[m
[31m-[m
[31m-ALTER TABLE Employee [m
[31m-DROP CONSTRAINT FK_Employee_User[m
[31m-[m
[31m-[m
[31m-ALTER TABLE Employee[m
[31m-DROP COLUMN userId[m
[31m-[m
[31m-ALTER TABLE [User][m
[31m-ADD employeeId char(7)[m
[31m-[m
[31m-ALTER TABLE [User][m
[31m-ADD CONSTRAINT FK_Employee_User[m
[31m-FOREIGN KEY (employeeId) REFERENCES Employee(employeeId)[m
[31m-[m
[31m-GO[m
[31m-[m
[31m---ThÃªm nhÃ¢n viÃªn vÃ o db (cháº¡y rá»“i)[m
[31m-CREATE PROCEDURE sp_InsertEmployee[m
[31m-    @FullName   NVARCHAR(30),[m
[31m-    @Position   VARCHAR(20),[m
[31m-	@DateOfBirth DATE[m
[31m-AS[m
[31m-BEGIN[m
[31m-    SET NOCOUNT ON;[m
[31m-[m
[31m-    DECLARE @EmpId CHAR(7);[m
[31m-[m
[31m-    -- Táº¡o ID cho Employee[m
[31m-    EXEC sp_GenerateId [m
[31m-        @prefix    = 'EM',        [m
[31m-        @tableName = 'Employee', [m
[31m-        @idColumn  = 'employeeId',[m
[31m-        @idLength  = 7,[m
[31m-        @newId     = @EmpId OUTPUT;[m
[31m-[m
[31m-    INSERT INTO Employee([m
[31m-        employeeId, fullName,dateOfBirth, position, createdAt, updatedAt[m
[31m-    )[m
[31m-    VALUES([m
[31m-        @EmpId, @FullName, @DateOfBirth, @Position, GETDATE(), GETDATE()[m
[31m-    );[m
[31m-END;[m
[31m-GO[m
[31m-[m
[31m-ALTER TABLE [User][m
[31m-ALTER COLUMN fullName nvarchar(30) null[m
[31m-[m
[31m-ALTER TABLE Employee[m
[31m-ADD dateOfBirth date[m
[31m-[m
[31m-ALTER TABLE [User][m
[31m-DROP COLUMN avatarId[m
[31m-[m
[31m-ALTER TABLE [User][m
[31m-ALTER COLUMN groupId char(7) not null [m
[31m---Táº M THá»œI Äá»‚ ÄÃ‚Y NHÆ¯NG MÃ€ GROUPID TRONG ÄÃ‚Y KO NÃŠN NULL PHáº¢I LUÃ”N NOT NULL, VÃŒ CHÆ¯A CÃ“ Dá»®[m
[31m--- LIá»†U NÃŠN Äá»‚ Táº M, NHÆ¯NG MÃ€ VáºªN Cáº¦N PHáº¢I KIá»‚M TRA TRONG PROCEDURE TRÆ¯á»šC KHI INSERT LÃ€ NÃ“ KO ÄÆ¯á»¢C [m
[31m---PHÃ‰P NULL NHÃ‰.[m
[31m-[m
[31m---ThÃªm user vÃ o trong db(Ä‘Ã£ cháº¡y)[m
[31m-CREATE PROCEDURE sp_InsertUser[m
[31m-    @UserName       varchar(20),[m
[31m-    @HashedPassword varchar(100),[m
[31m-    @AvatarUrl      varchar(100) = NULL,[m
[31m-    @Phone          varchar(25)  = NULL,[m
[31m-    @Email          varchar(30)  = NULL,[m
[31m-    @GroupId        char(7),[m
[31m-    @EmployeeId     char(7) = NULL[m
[31m-AS[m
[31m-BEGIN[m
[31m-    SET NOCOUNT ON;[m
[31m-    DECLARE @UserID char(7);[m
[31m-[m
[31m-    BEGIN TRY[m
[31m-        BEGIN TRAN;[m
[31m-[m
[31m-        -- Kiá»ƒm tra username trÃ¹ng[m
[31m-        IF EXISTS (SELECT 1 FROM [User] WHERE userName = @UserName)[m
[31m-        BEGIN[m
[31m-            RAISERROR('Username already exists.', 16, 1);[m
[31m-            ROLLBACK TRAN;[m
[31m-            RETURN;[m
[31m-        END[m
[31m-[m
[31m-        -- Kiá»ƒm tra GroupId[m
[31m-        IF NOT EXISTS (SELECT 1 FROM [Group] WHERE groupId = @GroupId)[m
[31m-        BEGIN[m
[31m-            RAISERROR('GroupId does not exist.', 16, 1);[m
[31m-            ROLLBACK TRAN;[m
[31m-            RETURN;[m
[31m-        END[m
[31m-[m
[31m-        -- Generate ID[m
[31m-        EXEC sp_GenerateId [m
[31m-            @prefix    = 'US',[m
[31m-            @tableName = '[User]',[m
[31m-            @idColumn  = 'userId',[m
[31m-            @idLength  = 7,[m
[31m-            @newId     = @UserID OUTPUT;[m
[31m-[m
[31m-        -- Insert User[m
[31m-        INSERT INTO [User]([m
[31m-            userId, fullName, userName, hashedPassword, avatarUrl, phone, email,[m
[31m-            groupId, createdAt, updatedAt, employeeId[m
[31m-        )[m
[31m-        VALUES ([m
[31m-            @UserID, NULL, @UserName, @HashedPassword, @AvatarUrl, @Phone, @Email,[m
[31m-            @GroupId, GETDATE(), GETDATE(), @EmployeeId[m
[31m-        );[m
[31m-[m
[31m-        COMMIT TRAN;[m
[31m-    END TRY[m
[31m-    BEGIN CATCH[m
[31m-        IF @@TRANCOUNT > 0 ROLLBACK TRAN;[m
[31m-        THROW;[m
[31m-    END CATCH[m
[31m-END;[m
[31m-GO[m
[31m-[m
[31m---ThÃªm MenuItem vÃ o há»‡ thá»‘ng (Ä‘Ã£ cháº¡y)[m
[31m-CREATE PROCEDURE sp_InsertMenuItem[m
[31m-    @MenuItemName      NVARCHAR(30),[m
[31m-    @UnitPrice         MONEY,[m
[31m-    @ImageUrl          VARCHAR(100),[m
[31m-    @Size              VARCHAR(7),[m
[31m-    @SpecialInfo       NVARCHAR(75),[m
[31m-    @Description       NVARCHAR(15),[m
[31m-    @TtDrinkDetailId   CHAR(7),[m
[31m-    @TtFoodDetailId    CHAR(7)[m
[31m-AS[m
[31m-BEGIN[m
[31m-    SET NOCOUNT ON;[m
[31m-[m
[31m-    -- Kiá»ƒm tra khÃ³a ngoáº¡i TotalDrinkDetail[m
[31m-    IF NOT EXISTS (SELECT 1 FROM TotalDrinkDetail WHERE ttDrinkDetailId = @TtDrinkDetailId)[m
[31m-    BEGIN[m
[31m-        RAISERROR('ttDrinkDetailId khÃ´ng tá»“n táº¡i.', 16, 1);[m
[31m-        RETURN;[m
[31m-    END[m
[31m-[m
[31m-    -- Kiá»ƒm tra khÃ³a ngoáº¡i TotalFoodDetail[m
[31m-    IF NOT EXISTS (SELECT 1 FROM TotalFoodDetail WHERE ttFoodDetailId = @TtFoodDetailId)[m
[31m-    BEGIN[m
[31m-        RAISERROR('ttFoodDetailId khÃ´ng tá»“n táº¡i.', 16, 1);[m
[31m-        RETURN;[m
[31m-    END[m
[31m-[m
[31m-    DECLARE @MenuItemId CHAR(7);[m
[31m-    EXEC sp_GenerateId[m
[31m-        @prefix    = 'MI',[m
[31m-        @tableName = 'MenuItem',[m
[31m-        @idColumn  = 'menuItemId',[m
[31m-        @idLength  = 7,[m
[31m-        @newId     = @MenuItemId OUTPUT;[m
[31m-[m
[31m-    INSERT INTO MenuItem([m
[31m-        menuItemId, menuItemName, unitPrice, imageUrl, size, specialInfo, [description],[m
[31m-        ttDrinkDetailId, ttFoodDetailId, createdAt, updatedAt[m
[31m-    )[m
[31m-    VALUES ([m
[31m-        @MenuItemId, @MenuItemName, @UnitPrice, @ImageUrl, @Size, @SpecialInfo, @Description,[m
[31m-        @TtDrinkDetailId, @TtFoodDetailId,[m
[31m-        GETDATE(), GETDATE()[m
[31m-    );[m
[31m-END;[m
[31m-GO[m
[31m-[m
[31m---ThÃªm menu vÃ o há»‡ thá»‘ng(Ä‘Ã£ cháº¡y)[m
[31m-CREATE PROCEDURE sp_InsertMenu[m
[31m-    @MenuName NVARCHAR(30)[m
[31m-AS[m
[31m-BEGIN[m
[31m-    SET NOCOUNT ON;[m
[31m-[m
[31m-    DECLARE @MenuId CHAR(7);[m
[31m-    EXEC sp_GenerateId[m
[31m-        @prefix    = 'MN',[m
[31m-        @tableName = 'Menu',[m
[31m-        @idColumn  = 'menuId',[m
[31m-        @idLength  = 7,[m
[31m-        @newId     = @MenuId OUTPUT;[m
[31m-[m
[31m-    INSERT INTO Menu (menuId, menuName, createdAt, updatedAt)[m
[31m-    VALUES ([m
[31m-        @MenuId,[m
[31m-        @MenuName,[m
[31m-        GETDATE(),[m
[31m-        GETDATE()[m
[31m-    );[m
[31m-END;[m
[31m-GO[m
[31m-[m
[31m---ThÃªm mÃ³n vÃ o menu trong há»‡ thá»‘ng (Ä‘Ã£ thÃªm)[m
[31m-CREATE PROCEDURE sp_InsertMenuDetail[m
[31m-    @MenuId      CHAR(7),[m
[31m-    @MenuItemId  CHAR(7)[m
[31m-AS[m
[31m-BEGIN[m
[31m-    SET NOCOUNT ON;[m
[31m-[m
[31m-    -- Kiá»ƒm tra menu cÃ³ tá»“n táº¡i[m
[31m-    IF NOT EXISTS (SELECT 1 FROM Menu WHERE menuId = @MenuId)[m
[31m-    BEGIN[m
[31m-        RAISERROR('MenuId khÃ´ng tá»“n táº¡i.', 16, 1);[m
[31m-        RETURN;[m
[31m-    END[m
[31m-[m
[31m-    -- Kiá»ƒm tra menuItem cÃ³ tá»“n táº¡i[m
[31m-    IF NOT EXISTS (SELECT 1 FROM MenuItem WHERE menuItemId = @MenuItemId)[m
[31m-    BEGIN[m
[31m-        RAISERROR('MenuItemId khÃ´ng tá»“n táº¡i.', 16, 1);[m
[31m-        RETURN;[m
[31m-    END[m
[31m-[m
[31m-    -- Kiá»ƒm tra trÃ¹ng khÃ³a chÃ­nh (MenuId + MenuItemId)[m
[31m-    IF EXISTS (SELECT 1 FROM MenuDetail WHERE menuId = @MenuId AND menuItemId = @MenuItemId)[m
[31m-    BEGIN[m
[31m-        RAISERROR('MÃ³n nÃ y Ä‘Ã£ tá»“n táº¡i trong Menu.', 16, 1);[m
[31m-        RETURN;[m
[31m-    END[m
[31m-[m
[31m-    INSERT INTO MenuDetail(menuId, menuItemId, createdAt, updatedAt)[m
[31m-    VALUES ([m
[31m-        @MenuId, @MenuItemId,[m
[31m-        GETDATE(), GETDATE()[m
[31m-    );[m
[31m-END;[m
[31m-GO[m
[31m-[m
[31m---ThÃªm customer vÃ o há»‡ thá»‘ng(Ä‘Ã£ thÃªm)[m
[31m-CREATE PROCEDURE sp_InsertCustomer[m
[31m-	@FullName nvarchar(30),[m
[31m-	@Phone varchar(25),[m
[31m-	@Email varchar(30),[m
[31m-	@Location nvarchar(100)[m
[31m-AS[m
[31m-BEGIN[m
[31m-	SET NOCOUNT ON;[m
[31m-[m
[31m-	DECLARE @CustomerId CHAR(7);[m
[31m-    EXEC sp_GenerateId[m
[31m-        @prefix    = 'CU',[m
[31m-        @tableName = 'Customer',[m
[31m-        @idColumn  = 'customerId',[m
[31m-        @idLength  = 7,[m
[31m-        @newId     = @CustomerId OUTPUT;[m
[31m-[m
[31m-	INSERT INTO Customer(customerId, fullName, phone, email, [location], createdAt, updatedAt)[m
[31m-	VALUES (@CustomerId, @FullName, @Phone, @Email, @Location, getdate(), getdate());[m
[31m-END;[m
[31m-GO[m
[31m-[m
[31m---ThÃªm Ä‘Æ¡n Ä‘áº·t bÃ n vÃ o há»‡ thá»‘ng (Ä‘Ã£ thÃªm)[m
[31m-CREATE PROCEDURE sp_InsertTableReservation[m
[31m-    @ArrivalTime       DATETIME,[m
[31m-    @HoldUntil         DATETIME,[m
[31m-    @GuestCount        INT,[m
[31m-    @CustomerId        CHAR(7),[m
[31m-    @EmployeeId        CHAR(7),[m
[31m-    @TableId           CHAR(7),     [m
[31m-    @SpecialRequest  NVARCHAR(30)[m
[31m-AS[m
[31m-BEGIN[m
[31m-    SET NOCOUNT ON;[m
[31m-[m
[31m-    BEGIN TRY[m
[31m-        BEGIN TRAN;[m
[31m-[m
[31m-        -- Kiá»ƒm tra Customer[m
[31m-        IF NOT EXISTS (SELECT 1 FROM Customer WHERE customerId = @CustomerId)[m
[31m-        BEGIN[m
[31m-            RAISERROR('KhÃ¡ch hÃ ng khÃ´ng tá»“n táº¡i trong há»‡ thá»‘ng', 16, 1);[m
[31m-            ROLLBACK;[m
[31m-            RETURN;[m
[31m-        END[m
[31m-[m
[31m-        -- Kiá»ƒm tra Employee[m
[31m-        IF NOT EXISTS (SELECT 1 FROM Employee WHERE employeeId = @EmployeeId)[m
[31m-        BEGIN[m
[31m-            RAISERROR('NhÃ¢n viÃªn khÃ´ng tá»“n táº¡i trong há»‡ thá»‘ng', 16, 1);[m
[31m-            ROLLBACK;[m
[31m-            RETURN;[m
[31m-        END[m
[31m-[m
[31m-        -- Kiá»ƒm tra table[m
[31m-        IF NOT EXISTS (SELECT 1 FROM [Table] WHERE tableId = @TableId)[m
[31m-        BEGIN[m
[31m-            RAISERROR('BÃ n khÃ´ng tá»“n táº¡i trong há»‡ thá»‘ng', 16, 1);[m
[31m-            ROLLBACK;[m
[31m-            RETURN;[m
[31m-        END[m
[31m-[m
[31m-        -- Sinh TableReservationId[m
[31m-        DECLARE @TableReservationId CHAR(7);[m
[31m-        EXEC sp_GenerateId[m
[31m-            @prefix    = 'TR',[m
[31m-            @tableName = 'TableReservation',[m
[31m-            @idColumn  = 'tableReservationId',[m
[31m-            @idLength  = 7,[m
[31m-            @newId     = @TableReservationId OUTPUT;[m
[31m-[m
[31m-        INSERT INTO TableReservation([m
[31m-            tableReservationId, customerId, tableId, employeeId, arrivalTime, holdUntil, guestCount,[m
[31m-            specialRequest, createdAt, updatedAt)[m
[31m-        VALUES ([m
[31m-            @TableReservationId, @CustomerId, @TableId, @EmployeeId, @ArrivalTime, @HoldUntil, [m
[31m-            @GuestCount,@SpecialRequest, GETDATE(), GETDATE()[m
[31m-        );[m
[31m-[m
[31m-        COMMIT;[m
[31m-    END TRY[m
[31m-    BEGIN CATCH[m
[31m-        IF @@TRANCOUNT > 0 ROLLBACK;[m
[31m-        THROW;[m
[31m-    END CATCH[m
[31m-END;    [m
[31m-GO[m
[31m-[m
[31m-[m
[31m-ALTER TABLE [Order][m
[31m-ALTER COLUMN tableId char(7) null[m
[31m-[m
[31m---ThÃªm nhÃ  cung cáº¥p vÃ o há»‡ thá»‘ng(Ä‘Ã£ thÃªm)[m
[31m-CREATE PROCEDURE sp_InsertSupplier[m
[31m-    @SupplierName NVARCHAR(30),[m
[31m-    @Phone        VARCHAR(25),[m
[31m-    @Email        VARCHAR(30),[m
[31m-    @Address      NVARCHAR(50)[m
[31m-AS[m
[31m-BEGIN[m
[31m-    SET NOCOUNT ON;[m
[31m-[m
[31m-    BEGIN TRY[m
[31m-        BEGIN TRAN;[m
[31m-[m
[31m-        DECLARE @SupplierId CHAR(7);[m
[31m-        EXEC sp_GenerateId[m
[31m-            @prefix='SP',[m
[31m-            @tableName='Supplier',[m
[31m-            @idColumn='supplierId',[m
[31m-            @idLength=7,[m
[31m-            @newId=@SupplierId OUTPUT;[m
[31m-[m
[31m-        INSERT INTO Supplier(supplierId, supplierName, phone, email, [address], createdAt, updatedAt)[m
[31m-        VALUES(@SupplierId, @SupplierName, @Phone, @Email, @Address, GETDATE(), GETDATE());[m
[31m-[m
[31m-        COMMIT;[m
[31m-        SELECT @SupplierId AS supplierId;[m
[31m-    END TRY[m
[31m-    BEGIN CATCH[m
[31m-        IF @@TRANCOUNT>0 ROLLBACK;[m
[31m-        THROW;[m
[31m-    END CATCH[m
[31m-END;[m
[31m-GO[m
[31m-[m
[31m---ThÃªm nguyÃªn liá»‡u cho quÃ¡n vÃ o há»‡ thá»‘ng (Ä‘Ã£ thÃªm)[m
[31m-CREATE PROCEDURE sp_InsertIngredient[m
[31m-    @IngredientName NVARCHAR(30),[m
[31m-    @Unit           NVARCHAR(10),[m
[31m-    @Quantity       INT = 0,[m
[31m-    @MinQuantity    INT = 0[m
[31m-AS[m
[31m-BEGIN[m
[31m-    SET NOCOUNT ON;[m
[31m-[m
[31m-    BEGIN TRY[m
[31m-        BEGIN TRAN;[m
[31m-[m
[31m-        DECLARE @IngredientId CHAR(7);[m
[31m-        EXEC sp_GenerateId[m
[31m-            @prefix='IG',[m
[31m-            @tableName='Ingredient',[m
[31m-            @idColumn='ingredientId',[m
[31m-            @idLength=7,[m
[31m-            @newId=@IngredientId OUTPUT;[m
[31m-[m
[31m-        INSERT INTO Ingredient(ingredientId, ingredientName, unit, quantity, minQuantity, createdAt, updatedAt)[m
[31m-        VALUES(@IngredientId, @IngredientName, @Unit, @Quantity, @MinQuantity, GETDATE(), GETDATE());[m
[31m-[m
[31m-        COMMIT;[m
[31m-        SELECT @IngredientId AS ingredientId;[m
[31m-    END TRY[m
[31m-    BEGIN CATCH[m
[31m-        IF @@TRANCOUNT>0 ROLLBACK;[m
[31m-        THROW;[m
[31m-    END CATCH[m
[31m-END;[m
[31m-GO[m
[31m-[m
[31m---ThÃªm chi tiáº¿t nguyÃªn liá»‡u thuá»™c tá»«ng nhÃ  cung cáº¥p(Ä‘Ã£ thÃªm)[m
[31m-CREATE PROCEDURE sp_InsertIngredientSupplier[m
[31m-    @IngredientId CHAR(7),[m
[31m-    @SupplierId   CHAR(7),[m
[31m-    @