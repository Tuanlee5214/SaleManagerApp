<Window x:Class="SaleManagerApp.Views.EditStaffWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Chỉnh sửa thông tin nhân viên" 
        Height="700" 
        Width="550"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        WindowStyle="None"
        Background="Transparent"
        AllowsTransparency="True"
        FontFamily="Segoe UI">

    <!-- Grid wrapper để toast có thể hiển thị -->
    <Grid x:Name="RootGrid">
        <Border Background="White" 
                CornerRadius="20" 
                Padding="40">
            <Border.Effect>
                <DropShadowEffect Color="Gray" 
                                  Direction="270" 
                                  ShadowDepth="3" 
                                  BlurRadius="15" 
                                  Opacity="0.3"/>
            </Border.Effect>

            <StackPanel Margin="0,-12,0,-40">
                <TextBlock Text="CHỈNH SỬA THÔNG TIN" 
                           FontSize="24" 
                           FontWeight="Bold" 
                           HorizontalAlignment="Center"
                           Margin="0,-5,0,30"/>

                <TextBlock Text="Họ và tên:" 
                           FontSize="15" 
                           Margin="0,-15,0,8"/>
                <Border Background="#E8E8E8" 
                        CornerRadius="10" 
                        BorderBrush="#407BFF" 
                        BorderThickness="2"
                        Height="45"
                        Margin="0,0,0,20">
                    <TextBox x:Name="NameTextBox"
                             Text="{Binding FullName, UpdateSourceTrigger=PropertyChanged}"
                             Background="Transparent"
                             BorderThickness="0"
                             Padding="15,0"
                             VerticalContentAlignment="Center"
                             FontSize="14"/>
                </Border>

                <TextBlock Text="Ngày tháng năm sinh:" 
                           FontSize="15" 
                           Margin="0,-15,0,8"/>
                <Border Background="#E8E8E8" 
                        CornerRadius="10" 
                        Height="45"
                        Margin="0,0,0,20">
                    <DatePicker x:Name="BirthdayDatePicker"
                                SelectedDate="{Binding DateOfBirth}"
                                Background="Transparent"
                                BorderThickness="0"
                                Padding="15,0"
                                VerticalContentAlignment="Center"
                                FontSize="14"/>
                </Border>

                <TextBlock Text="Chức vụ:" 
                           FontSize="15" 
                           Margin="0,-15,0,8"/>
                <Border Background="#F5F5F5" 
                        CornerRadius="10" 
                        Height="45"
                        Margin="0,0,0,20">
                    <TextBox x:Name="PositionTextBox"
                             Text="{Binding Position, UpdateSourceTrigger=PropertyChanged}"
                             IsReadOnly="True"
                             Background="Transparent"
                             BorderThickness="0"
                             Padding="15,0"
                             VerticalContentAlignment="Center"
                             FontSize="14"
                             Foreground="#666666"
                             Cursor="Arrow">
                        <TextBox.Style>
                            <Style TargetType="TextBox">
                                <Setter Property="FontFamily" Value="Segoe UI"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="TextBox">
                                            <Border Background="{TemplateBinding Background}"
                                                    BorderThickness="0">
                                                <ScrollViewer x:Name="PART_ContentHost"
                                                              Margin="0"
                                                              VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </TextBox.Style>
                    </TextBox>
                </Border>

                <TextBlock Text="Số điện thoại:" 
                           FontSize="15" 
                           Margin="0,-15,0,8"/>
                <Border Background="#E8E8E8" 
                        CornerRadius="10" 
                        Height="45"
                        Margin="0,0,0,20">
                    <TextBox x:Name="PhoneTextBox"
                             Text="{Binding Phone, UpdateSourceTrigger=PropertyChanged}"
                             Background="Transparent"
                             BorderThickness="0"
                             Padding="15,0"
                             VerticalContentAlignment="Center"
                             FontSize="14"/>
                </Border>

                <TextBlock Text="Email:" 
                           FontSize="15" 
                           Margin="0,-15,0,8"/>
                <Border Background="#E8E8E8" 
                        CornerRadius="10" 
                        Height="45"
                        Margin="0,0,0,20">
                    <TextBox x:Name="EmailTextBox"
                             Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
                             Background="Transparent"
                             BorderThickness="0"
                             Padding="15,0"
                             VerticalContentAlignment="Center"
                             FontSize="14"/>
                </Border>

                <TextBlock Text="Ảnh đại diện:" 
                           FontSize="15" 
                           Margin="0,-15,0,8"/>

                <Button Command="{Binding PickImageCommand}"
                        Width="80"
                        Height="80"
                        Background="Transparent"
                        BorderThickness="0"
                        HorizontalAlignment="Left"
                        Margin="0,0,0,30"
                        Cursor="Hand">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Grid Width="80" Height="80">
                                <Border Width="80" Height="80" 
                                        Background="#E8E8E8" 
                                        CornerRadius="40">
                                    <Border.Clip>
                                        <EllipseGeometry RadiusX="40" RadiusY="40" Center="40,40"/>
                                    </Border.Clip>
                                </Border>

                                <Border Width="80" Height="80" CornerRadius="40">
                                    <Border.Clip>
                                        <EllipseGeometry RadiusX="40" RadiusY="40" Center="40,40"/>
                                    </Border.Clip>
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding HasImage}" Value="True">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <Image Source="{Binding PreviewPath}" 
                                           Stretch="UniformToFill"
                                           Width="80"
                                           Height="80"/>
                                </Border>

                                <Viewbox Width="30" Height="30" 
                                         HorizontalAlignment="Center" 
                                         VerticalAlignment="Center">
                                    <Viewbox.Style>
                                        <Style TargetType="Viewbox">
                                            <Setter Property="Visibility" Value="Visible"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding HasImage}" Value="True">
                                                    <Setter Property="Visibility" Value="Collapsed"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Viewbox.Style>
                                    <Canvas Width="24" Height="24">
                                        <Path Data="M12 5 L12 19 M5 12 L19 12" 
                                              Stroke="#666" 
                                              StrokeThickness="2"/>
                                    </Canvas>
                                </Viewbox>
                            </Grid>
                        </ControlTemplate>
                    </Button.Template>
                </Button>

                <Grid Margin="0,20,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Button Content="Hủy"
                            Command="{Binding CancelCommand}"
                            Grid.Column="0"
                            Height="50"
                            Margin="0,0,10,0"
                            Background="#2D2D2D"
                            Foreground="White"
                            FontSize="16"
                            FontWeight="SemiBold"
                            Cursor="Hand">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}"
                                        CornerRadius="25"
                                        Padding="10">
                                    <ContentPresenter HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button Content="Lưu thay đổi"
                            Command="{Binding SaveCommand}"
                            Grid.Column="1"
                            Height="50"
                            Margin="10,0,0,0"
                            Background="#407BFF"
                            Foreground="White"
                            FontSize="16"
                            FontWeight="SemiBold"
                            Cursor="Hand">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}"
                                        CornerRadius="25"
                                        Padding="10">
                                    <ContentPresenter HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </Grid>

            </StackPanel>
        </Border>
    </Grid>
</Window>